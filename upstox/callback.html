<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Auth callback</title>
</head>
<body>
  <h2>Processing authorization...</h2>
  <script>
    // Extract `code` (or error) from query string and forward to app scheme.
    const params = new URLSearchParams(window.location.search);
    const code = params.get('code');
    const error = params.get('error');

    if (code) {
      // Redirect to your app's custom scheme. Add any other params if required.
      window.location.href = `myapp://callback?code=${encodeURIComponent(code)}`;
    } else {
      // Show error or redirect to an error page
      document.body.innerHTML = '<h3>Authorization failed</h3><pre>' + (error || 'no code') + '</pre>';
    }
  </script>
</body>
</html>
